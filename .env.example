##################################################################
# Vonage Voice Agent - Environment Template
# Copy to .env and replace placeholder values with real secrets.
##################################################################

# =============================================================================
# Runtime, Logging & Behavioral Controls
# =============================================================================
LOG_LEVEL=INFO                              # DEBUG | INFO | WARNING | ERROR
VOICE_AGENT_CACHE_DIR=./.model_cache        # Local cache directory for models
CALL_COST_PER_HOUR=4.00                     # USD per live hour for cost reports
USER_SILENCE_WARNING_SECONDS=15             # Seconds before re-engaging the caller
USER_SILENCE_TIMEOUT_SECONDS=35             # Seconds of silence before auto-hangup
ENABLE_CALL_RECORDING=true                  # Set false to disable recording
ENABLE_LOCAL_BUFFER=false                   # True keeps a local copy on disk
ENABLE_OFFICE_AMBIENCE=true                 # Ambient office loop during thinking
ENABLE_TYPING_NOISE=true                    # Keyboard cues while thinking

# =============================================================================
# Knowledge Base / File Search (RAG) Configuration
# =============================================================================
# Enable Gemini File Search for document-grounded responses
# When enabled, the agent can search uploaded documents for context
ENABLE_FILE_SEARCH=false

# =============================================================================
# LiveKit Cloud & Vonage Telephony (required)
# =============================================================================
LIVEKIT_URL=wss://your-project.livekit.cloud
LIVEKIT_API_KEY=your_livekit_api_key
LIVEKIT_API_SECRET=your_livekit_api_secret
OUTBOUND_TRUNK_ID=your_livekit_trunk_id
VONAGE_API_KEY=your_vonage_api_key
VONAGE_API_SECRET=your_vonage_api_secret

# =============================================================================
# Database Configuration (required)
# =============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=salesmaya_agent
DB_USER=your_db_user
DB_PASSWORD=your_db_password

# Database Connection Pooling (optional, recommended for production)
USE_CONNECTION_POOLING=true                 # Enable connection pooling (default: true)
DB_POOL_MIN_CONNECTIONS=1                   # Minimum connections in pool (default: 1)
DB_POOL_MAX_CONNECTIONS=10                  # Maximum connections in pool (default: 10)
DB_CONNECTION_TIMEOUT=30                    # Connection timeout in seconds (default: 30)
DB_MAX_RETRIES=3                            # Max retry attempts on connection failure
DB_RETRY_DELAY_BASE=2.0                     # Base delay for exponential backoff

# =============================================================================
# Google Cloud Storage for Recordings (required when recording enabled)
# =============================================================================
GCS_PROJECT_ID=your_gcp_project_id
GCS_BUCKET=your_gcs_bucket_name
GCS_CREDENTIALS_JSON=path/to/service-account.json

# =============================================================================
# Third-Party AI / Media Provider Credentials (required)
# =============================================================================
DEEPGRAM_API_KEY=your_deepgram_api_key
CARTESIA_API_KEY=your_cartesia_api_key
GROQ_API_KEY=your_groq_api_key
GOOGLE_API_KEY=your_google_api_key
GEMINI_API_KEY=your_gemini_api_key
OPENAI_API_KEY=your_openai_api_key
ELEVEN_API_KEY=your_elevenlabs_api_key

# Optional TTS providers (leave empty if not using)
RIME_API_KEY=
SMALLEST_TTS_API_KEY=

# =============================================================================
# TTS Provider Configuration
# =============================================================================
TTS_PROVIDER=cartesia                       # cartesia | google | gemini | elevenlabs | rime | smallest

# Cartesia TTS Settings
DEFAULT_CARTESIA_VOICE_ID=95d51f79-c397-46f9-b49a-23763d3eaa2d
CARTESIA_TTS_MODEL=sonic-3
CARTESIA_TTS_LANGUAGE=en
CARTESIA_TTS_VOICE_ID=95d51f79-c397-46f9-b49a-23763d3eaa2d
CARTESIA_TTS_API_VERSION=2025-04-16
CARTESIA_TTS_BUFFER_SECONDS=0.5
CARTESIA_TTS_MAX_TEXT_LENGTH=220

# Google TTS Settings
GOOGLE_TTS_LANGUAGE=en-IN
GOOGLE_TTS_VOICE_NAME=en-IN-Neural2-F
GOOGLE_TTS_SPEAKING_RATE=1.0
GOOGLE_TTS_PITCH=0
GOOGLE_CHIRP_VOICE_NAME=hi-IN-Chirp3-HD-Callirrhoe

# Gemini TTS Settings
GEMINI_TTS_MODEL=gemini-2.5-flash-preview-tts
GEMINI_TTS_VOICE_NAME=aoede
GEMINI_TTS_INSTRUCTIONS=Speak with a friendly, professional tone in English (India) using a female voice.

# ElevenLabs TTS Settings
ELEVENLABS_TTS_MODEL=eleven_turbo_v2_5
ELEVENLABS_TTS_VOICE_ID=1ea3IFhmSWgw8sJkSvfJ
ELEVENLABS_TTS_LANGUAGE=en
ELEVENLABS_TTS_STREAMING_LATENCY=1
ELEVENLABS_TTS_ENABLE_SSML=true
ELEVENLABS_TTS_CHUNK_SCHEDULE=10,20,40
ELEVENLABS_TTS_AUTO_MODE=true
ELEVENLABS_TTS_TEXT_NORMALIZATION=none
ELEVENLABS_TTS_ENCODING=mp3_44100_128
ELEVENLABS_BASE_URL=https://api.elevenlabs.io/v1
ELEVENLABS_TTS_STABILITY=0.4
ELEVENLABS_TTS_SIMILARITY=0.85
ELEVENLABS_TTS_STYLE=0.6
ELEVENLABS_TTS_SPEED=1.05
ELEVENLABS_TTS_SPEAKER_BOOST=true
ELEVENLABS_TTS_FORCE_CHUNKED=true

# Rime TTS Settings (optional)
RIME_TTS_MODEL=
RIME_TTS_SPEAKER=
RIME_TTS_AUDIO_FORMAT=
RIME_TTS_SAMPLE_RATE=
RIME_TTS_SPEED_ALPHA=
RIME_TTS_REDUCE_LATENCY=

# Smallest AI TTS Settings (optional)
SMALLEST_TTS_MODEL=lightning-large
SMALLEST_TTS_VOICE_ID=irisha
SMALLEST_TTS_SAMPLE_RATE=44100
SMALLEST_TTS_SPEED=1.0
SMALLEST_TTS_CONSISTENCY=0.65
SMALLEST_TTS_SIMILARITY=0.75
SMALLEST_TTS_ENHANCEMENT=0.4
SMALLEST_TTS_LANGUAGE=en
SMALLEST_TTS_OUTPUT_FORMAT=pcm16
SMALLEST_TTS_BASE_URL=https://api.smallest.ai/v1

# =============================================================================
# LLM Provider Configuration
# =============================================================================
LLM_PROVIDER=google                         # google | groq | openai
LLM_MODEL=gemini-2.0-flash                  # Model identifier for selected provider

# Provider-specific settings
GROQ_MODEL=openai/gpt-oss-20b
GROQ_BASE_URL=https://api.groq.com/openai/v1
OPENAI_BASE_URL=https://api.openai.com/v1
GEMINI_MODEL=gemini-flash-latest
GEMINI_FALLBACK_MODEL=gemini-2.5-flash

# Gemini thinking/reasoning level: no, low, medium, high
# no/off = disabled (fastest), low = 1024 tokens, medium = 8192 tokens, high = 24576 tokens
GEMINI_THINKING_LEVEL=no

# Native Gemini tools (only work when LLM_PROVIDER=google)
GEMINI_ENABLE_GOOGLE_SEARCH=false           # Allow Gemini to search the web
GEMINI_ENABLE_URL_CONTEXT=false             # Allow Gemini to fetch and analyze URLs

USE_GEMINI_LLM=false

# Outbound call greeting delay (seconds) - time to wait after call connects before speaking
OUTBOUND_GREETING_DELAY_SECONDS=0.3

# =============================================================================
# Google Workspace OAuth & Meet/Calendar/Gmail Automation
# =============================================================================
# Download OAuth client JSON from Google Cloud Console
GOOGLE_OAUTH_CLIENT_SECRETS=./credentials/google-oauth-client.json
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:8000/auth/google/callback

# Generate secrets with: python -c "import secrets; print(secrets.token_urlsafe(32))"
GOOGLE_OAUTH_STATE_SECRET=replace_with_random_base64_secret
# Generate Fernet key with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
GOOGLE_TOKEN_ENCRYPTION_KEY=replace_with_fernet_key

GOOGLE_OAUTH_SCOPES=openid,https://www.googleapis.com/auth/userinfo.email,https://www.googleapis.com/auth/calendar.events,https://www.googleapis.com/auth/gmail.send
GOOGLE_OAUTH_STATE_TTL_SECONDS=600

# Frontend redirect URLs after OAuth completion
GOOGLE_OAUTH_SUCCESS_FALLBACK=http://localhost:3000/oauth/success
GOOGLE_OAUTH_ERROR_FALLBACK=http://localhost:3000/oauth/error
# JSON map of frontend_id to redirect URLs
FRONTEND_REDIRECT_MAP={"console": "http://localhost:3000/success", "settings": "https://your-app.com/settings?google=connected"}

# =============================================================================
# API Security - Frontend Authentication & Rate Limiting
# =============================================================================
# Format: JSON object mapping frontend_id to api_key
# Example: {"console": "secret-key-for-console", "mobile": "secret-key-for-mobile"}
# Leave empty or unset to disable authentication (development mode)
# Generate keys with: python -c "import secrets; print(secrets.token_urlsafe(32))"
FRONTEND_API_KEYS={"console": "your_console_api_key", "settings": "your_settings_api_key", "dev": "your_dev_api_key"}

# Headers required when security is enabled:
# X-Frontend-ID: The frontend identifier (e.g., "console")
# X-API-Key: The secret key for that frontend

# =============================================================================
# Batch Report Email Configuration
# =============================================================================
# SMTP settings for sending batch completion reports
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_gmail_app_password        # Use Gmail App Password, not regular password
FROM_EMAIL=your_email@gmail.com

# Email recipients for batch reports (comma-separated)
# Used by batch_report_service.py when a batch completes
REPORT_EMAIL=recipient1@example.com,recipient2@example.com

# =============================================================================
# Human Agent Configuration
# =============================================================================
HUMAN_AGENT_NUMBER=+1234567890              # Phone number for human agent escalation
VOICE_AGENT_NAME=inbound-agent-local        # Agent identifier name

# =============================================================================
# GLINKS Scheduling Configuration
# =============================================================================
# Default timeline in days when no grade is mentioned
DEFAULT_TIMELINE_DAYS=1                     # Default: 1 day after contact

# Grade-specific timelines (in days)
GRADE_12_TIMELINE_DAYS=1                    # Grade 12: 1 day (3 times per week)
GRADE_11_TIMELINE_DAYS=3                    # Grade 11: 3 days (2 times per week)
GRADE_10_TIMELINE_DAYS=3                    # Grade 10: 3 days (2 times per week)
GRADE_9_TIMELINE_DAYS=5                     # Grade 9: 5 days (1 time per week)
GRADE_8_TIMELINE_DAYS=5                     # Grade 8: 5 days (1 time per week)
GRADE_7_TIMELINE_DAYS=5                     # Grade 7: 5 days (1 time per week)
GRADE_6_TIMELINE_DAYS=5                     # Grade 6: 5 days (1 time per week)
GRADE_5_TIMELINE_DAYS=5                     # Grade 5: 5 days (1 time per week)
GRADE_4_TIMELINE_DAYS=5                     # Grade 4: 5 days (1 time per week)
GRADE_3_TIMELINE_DAYS=5                     # Grade 3: 5 days (1 time per week)
GRADE_2_TIMELINE_DAYS=5                     # Grade 2: 5 days (1 time per week)
GRADE_1_TIMELINE_DAYS=5                     # Grade 1: 5 days (1 time per week)

